-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public."Clientes"
(
    id serial NOT NULL,
    razon_social character varying COLLATE pg_catalog."default",
    "CUIT" integer,
    tributacion character varying COLLATE pg_catalog."default",
    telefono integer,
    email character varying COLLATE pg_catalog."default",
    CONSTRAINT "Clientes_pkey" PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public."Logistica"
(
    id serial NOT NULL,
    razon_social character varying COLLATE pg_catalog."default",
    "CUIT" integer,
    direccion character varying COLLATE pg_catalog."default",
    tipo character varying COLLATE pg_catalog."default",
    CONSTRAINT "Logistica_pkey" PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public."MetodoPagos"
(
    id serial NOT NULL,
    nombre character varying COLLATE pg_catalog."default",
    CONSTRAINT "MetodoPagos_pkey" PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public."Pedidos"
(
    id integer NOT NULL,
    id_producto integer,
    cantidad integer,
    CONSTRAINT "Pedidos_pkey" PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public."Precios"
(
    id serial NOT NULL,
    id_producto integer,
    costo numeric,
    precio_venta numeric,
    "precio_sin_IVA" numeric,
    precio_con_iva numeric,
    precio_minorista numeric,
    precio_mayorista numeric,
    usd numeric,
    pesos numeric,
    CONSTRAINT "Precios_pkey" PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public."Productos"
(
    id serial NOT NULL,
    id_tipo integer,
    "SKU" integer,
    nombre character varying COLLATE pg_catalog."default",
    stock_minimo integer,
    stock_actual integer,
    CONSTRAINT "Productos_pkey" PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public."TipoProductos"
(
    id serial NOT NULL,
    nombre character varying COLLATE pg_catalog."default",
    CONSTRAINT "TipoProductos_pkey" PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public."Ventas"
(
    id serial NOT NULL,
    id_cliente integer,
    id_pedido integer,
    id_logistica integer,
    id_metodo_pago integer,
    fecha timestamp without time zone,
    subtotal numeric,
    descuento numeric,
    precio_final numeric,
    CONSTRAINT "Ventas_pkey" PRIMARY KEY (id)
);

ALTER TABLE IF EXISTS public."Pedidos"
    ADD CONSTRAINT "Pedidos_id_producto_fk" FOREIGN KEY (id_producto)
    REFERENCES public."Productos" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Precios"
    ADD CONSTRAINT "Precios_id_producto_fk" FOREIGN KEY (id_producto)
    REFERENCES public."Productos" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Productos"
    ADD CONSTRAINT "Productos_id_tipo_fk" FOREIGN KEY (id_tipo)
    REFERENCES public."TipoProductos" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Ventas"
    ADD CONSTRAINT "Ventas_id_clientes_fk" FOREIGN KEY (id_cliente)
    REFERENCES public."Clientes" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Ventas"
    ADD CONSTRAINT "Ventas_id_logistica_fk" FOREIGN KEY (id_logistica)
    REFERENCES public."Logistica" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Ventas"
    ADD CONSTRAINT "Ventas_id_metodo_pagos_fk" FOREIGN KEY (id_metodo_pago)
    REFERENCES public."MetodoPagos" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Ventas"
    ADD CONSTRAINT "Ventas_id_pedidos_fk" FOREIGN KEY (id_pedido)
    REFERENCES public."Pedidos" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;